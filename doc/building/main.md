# olio 电路系统

## 电路系统是什么

电路系统是 olio 中完成交互的重要功能，如果你了解mc的红石电路，那是相似的设计

## 电路的基本构造

电路系统基本的构造为五类器件，每个器件都是一个block，可以放置在地图上。

放置在地图上占一个格子，立即生效。

这五类器件可根据他自身的属性属于地图的某一层，大部分的器件在电路层上。
电路层属于背景，但比一般的背景block 显示优先级高，会叠在墙纸的前面。

角色不会与电路层发生碰撞。

### 1.电源

电源产生一个持续的能量，他向周围四个正方向传递能量

### 2.导线

导线可以从周围八个方向接收能量传递如果有能量输入则激活，激活的导线继续向周围八个方向传递能量

### 3.开关

开关可以在某种条件下连通（变成导线），在某种条件下断开

这是一个很大的类别
比如 

角色靠近触发开关（常开型），只要角色靠近，该开关则打开，且一直打开

角色靠近触发开关（开关型），角色靠近打开，角色远离，关闭

延时开关(1s)，该开关有能量输入则一秒后打开，且一直打开

继电器型，从一个方向输入控制信号，从另一个方向输入能量信号，从第三个方向输出能量信号。
当控制信号方向有能量过来，输入能量和输出能量导通，且一直导通

逻辑开关（非门），从两个方向输入控制信号，从第三个方向输出能量信号。
当两个输入一个有能量一个没能量时，第三个方向有输出

### 4.执行器件

做出功能的器件，也将是一个很大的类别

比如灯泡，有能量输入就亮起。

比如音效盒，有能量输入就响一声

### 5.集成电路

因为提供的都是基本的元件，那么要组成电路就会很大，直接摆在地图上也很大，而且不容易复用。

虽然将他作为一个道具也是种解决方案，但不解决体积的问题。

集成电路的功能是封装，一个集成电路只占一格。

集成电路只能处于电路层，集成电路有很多规格 8x8 16x16 等

集成电路可以展开编辑，当展开一个集成电路，他内部又是一个8x8（取决于集成电路规格）的地图，且这个地图固定有八方向八个连接点，对应集成电路折叠起来的八个方向。

集成电路的内部地图上只能摆放电路层的元器件，通过这些元器件的连接形成具有新的功能的小集成电路

比如本来不存在一个信号就播一首歌的block，但是我通过一块集成电路，就可以展开在他内部实现。
就算一块集成电路不够布置这个逻辑电路，我还可以在集成电路内部再摆上一块集成电路。

如果有程序基础，你就会发现集成电路的封装，本质上就是函数的封装。^_^

## 电路系统能做什么

电路系统就是编程语言，有更游戏化外在表现的编程语言。

除了场景中的电路来实现各种机关陷阱来坑害玩家。
或者实现一些好玩的小机关，钢琴，迷宫什么的

还可以用来驱动游戏种的NPC AI，游戏胜利条件，武器系统，等等等等。

我们完全是把电路系统当作一门脚本语言来设计。
